# PixSort — 画像並び替え＆リネームツール

ディレクトリ内のPNG画像をドラッグ＆ドロップで自由に並べ替え、連番（010, 020, 030...）でリネームするWindows向けツール。

AI画像生成のワークフローで、生成した画像を好みの順番に整理する用途を想定している。

## スクリーンショット

```
┌───────────────────────────────────────────────┐
│ [フォルダ選択]  C:\path\to\dir       [分割]   │
├───────────────────────────────────────────────┤
│ ┌────────┐  ┌────────┐  ┌────────┐           │
│ │ thumb  │  │ thumb  │  │ thumb  │           │
│ │ 010.png│  │ 020.png│  │ 030.png│           │
│ └────────┘  └────────┘  └────────┘           │
│  ...                                          │
├───────────────────────────────────────────────┤
│              [リネーム実行]                    │
└───────────────────────────────────────────────┘
```

## 必要環境

- Python 3.10+
- Windows 10/11

## インストール

```bash
pip install Pillow tkinterdnd2
```

## 起動方法

`image_sorter.bat` をダブルクリック、または：

```bash
python image_sorter.py
```

## 使い方

### 基本操作

1. **フォルダを開く** — 「フォルダ選択」ボタンか、エクスプローラからフォルダをウィンドウにドロップ
2. **並べ替え** — サムネイルをドラッグ＆ドロップで好きな順番に移動
3. **リネーム** — 「リネーム実行」ボタンで現在の並び順に連番リネーム（010.png, 020.png, ...）

10刻みの連番なので、あとから手動でファイルを間に挿入することもできる。

### サムネイルサイズ変更

`Ctrl + マウスホイール` で小(80px)・中(150px)・大(250px)の3段階切り替え。

### 分割ビュー

「分割」ボタンで左右2ペインモードに切り替え。同じ画像リストを2つのビューで見ながら、離れた位置の画像をドラッグで移動できる。ペイン間のクロスドラッグにも対応。

### 画像プレビュー

サムネイルをダブルクリックで原寸表示。左右キーで前後の画像に移動、Escで閉じる。

## パフォーマンス

- **並列読み込み**: `ThreadPoolExecutor` でサムネイル生成を並列化。CPUコア数に応じたワーカーで処理
- **ディスクキャッシュ**: 生成したサムネイルを `cache/` にJPEG保存。2回目以降の読み込みが高速化
- キャッシュは起動時に自動クリーンアップ（上限200MB、古いものから削除）
- ソース画像の変更・リネームは自動検出して再生成

## ファイル構成

```
pix_sort/
├── image_sorter.py    # メインアプリ
├── image_sorter.bat   # 起動用バッチ
├── config.json        # 設定（自動生成、前回フォルダを記憶）
├── cache/             # サムネイルキャッシュ（自動生成）
└── doc/
    └── SPEC.md        # 詳細仕様書
```
